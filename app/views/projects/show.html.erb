<div class="container mt-3">
  <h1 class="mb-3"><%= @project.title %></h1>
  <h5 class="text-muted mb-3"><%= @project.description %></h5>
  <hr>
  <% if @project.design_document.attached? %>
    <p>Design Document: <%= link_to 'Download', url_for(@project.design_document), class: 'btn btn-primary mt-2' %></p>
  <% else %>
    <p>No design document attached.</p>
  <% end %>
  <% if @project.srs_document.attached? %>
    <p>SRS Document: <%= link_to 'Download', url_for(@project.srs_document), class: 'btn btn-primary mt-2' %></p>
  <% else %>
    <p>No SRS document attached.</p>
  <% end %>
  <p><strong>Visibility: </strong><%= @project.visibility_status %></p>
  <div>
    <strong>Skills:</strong>
    <% @project.skills.each do |skill| %>
      <span class="badge bg-success"><%= skill %></span>
    <% end %>
  </div>
  <div class="mt-2">
    <strong class="mt-4">Categories:</strong>
    <% @project.categories.each do |cat| %>
      <span class="badge bg-secondary"><%= cat.name %></span>
    <% end %>
  </div>
  <hr>
  <% if current_user == @project.user %>
    <%= link_to edit_project_path(@project), class: "btn btn-warning mt-2" do %>
      Edit <i class="bi bi-pencil"></i>
    <% end %>
  <% end %>
  <% if freelancer? %>
    <p class="card-text">by <%= @project.username %></p>
    <% unless @project.bid_awarded? %>
      <%= link_to new_bid_path(project_id: @project.id), class: 'btn btn-primary mt-2' do %>
        New Bid <i class="bi bi-plus-circle-dotted"></i>
      <% end %>
    <% else %>
      <div class="alert alert-warning">Project has already been awarded</div>
    <% end %>
  <% end%>
  <h2 class="my-4">Bids:</h2>
  <table class="table">
    <thead>
      <tr>
        <th>Bid Name</th>
        <th>Bid Description</th>
        <th>Bid Amount</th>
        <th>By</th>
        <th>Actions</th>
        <th>Show</th>
      </tr>
    </thead>
    <tbody>
      <% @bids.each do |bid| %>
        <tr>
          <td><%= bid.bid_name %></td>
          <td><%= bid.bid_description %></td>
          <td><%= bid.bid_amount %></td>
          <td><%= bid.user.username %></td>
          <td>
            <% unless bid.accepted? %>
              <%= link_to 'Accept Bid', accept_bid_path(bid), method: :post, class: 'btn btn-primary' %>
              <%= link_to 'Reject Bid', reject_bid_path(bid), method: :post, class: 'btn btn-danger' %>
            <% else %>
              <div class="alert alert-success">
                This bid is awarded the project
              </div>
            <% end %>
          </td>
          <td>
            <%= link_to bid, class: "btn btn-primary btn-sm" do %>
              <i class="bi bi-arrow-right-circle"></i>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
