<div class="container mt-3">
  <h1 class="mb-3"><%= @project.title %></h1>
  <h5 class="text-muted mb-3"><%= @project.description %></h5>
  <hr>
  <% if @project.design_document.attached? %>
    <p>Design Document: <%= link_to 'Download', url_for(@project.design_document), class: 'btn btn-primary mt-2' %></p>
  <% else %>
    <p>No design document attached.</p>
  <% end %>
  <% if @project.srs_document.attached? %>
    <p>SRS Document: <%= link_to 'Download', url_for(@project.srs_document), class: 'btn btn-primary mt-2' %></p>
  <% else %>
    <p>No SRS document attached.</p>
  <% end %>
  <div>
    <strong>Skills:</strong>
    <% @project.skills.each do |skill| %>
      <span class="badge bg-success"><%= skill %></span>
    <% end %>
  </div>
  <div class="mt-2">
    <strong class="mt-4">Categories:</strong>
    <% @project.categories.each do |cat| %>
      <span class="badge bg-secondary"><%= cat.name %></span>
    <% end %>
  </div>
  <hr>
  <% if freelancer? %>
    <p class="card-text">by <%= @project.username %></p>
    <% unless @project.bid_awarded? %>
      <%= link_to new_bid_path(project_id: @project.id), class: 'btn btn-primary mt-2' do %>
        New Bid <i class="bi bi-plus-circle-dotted"></i>
      <% end %>
    <% else %>
      <div class="alert alert-warning">You cannot bid on this project! Project has already been awarded</div>
    <% end %>
  <% end%>
  <h2 class="my-4">Bids:</h2>
  <% @bids.each do |bid| %>
    <% unless bid.rejected? %>
      <h4><%= bid.bid_name %></h4>
      <p><%= bid.bid_description %></p>
      <p><%= bid.bid_amount %></p>
      <p><%= bid.bid_status %></p>
      <p>by <%= bid.username %></p>
      <% if admin? || client? %>
        <% unless bid.awarded? %>
          <% if bid.accepted? %>
            <%= link_to 'Award Bid to freelancer', award_bid_path(bid), method: :post, class: 'btn btn-primary mt-2' %>
            <%= link_to 'Put on hold', hold_bid_path(bid), method: :post, class: 'btn btn-warning mt-2' %>
          <% else %>
            <%= link_to 'Accept Bid', accept_bid_path(bid), method: :post, class: 'btn btn-primary mt-2' %>
            <%= link_to 'Reject Bid', reject_bid_path(bid), method: :post, class: 'btn btn-danger mt-2' %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</div>
