<div class="col m-2">
  <div class="card h-100">
    <div class="card-header">
      Project
    </div>
    <div class="card-body">
      <h5 class="card-title"><%= link_to project.title, project, class: 'text-decoration-none' %></h5>
      <h6 class="card-subtitle mb-2"><%= link_to project.username, project.user, class: 'text-decoration-none text-muted' %></h6>
      <p class="card-text"><%= project.description %></p>
      <p class="card-text"><%= project.visibility_status %></p>
      <% project.categories.each do |cat| %>
        <span class="badge <%= cycle('bg-primary', 'bg-secondary', 'bg-success', 'bg-danger', 'bg-warning', 'bg-info') %>"><%= cat.name %></span>
      <% end %>
      <% if project.has_awarded_bid? %>
        <div class="alert alert-danger m-3">Project has awarded bid</div>
      <% end %>
      <hr>
      <%= link_to project, class: "btn btn-primary mt-2" do %>
        Show <i class="bi bi-arrow-right-circle"></i>
      <% end %>
      <% if freelancer? && !project.bid_awarded? %>
        <%= link_to new_bid_path(project_id: project.id), class: 'btn btn-warning mt-2' do %>
          New Bid <i class="bi bi-plus-circle-dotted"></i>
        <% end %>
      <% end %>
      <% if current_user == project.user || admin? %>
        <% unless project.has_awarded_bid? %>
          <%= link_to edit_project_path(project), class: "btn btn-warning mt-2" do %>
            Edit <i class="bi bi-pencil"></i>
          <% end %>
        <% end %>
        <%= link_to project_path(project), class: "btn btn-danger mt-2", method: :delete, data: { confirm: 'Are you sure?' } do %>
          Delete <i class="bi bi-trash"></i>
        <% end %>
      <% end %>
    </div>
    <div class="card-footer text-muted">
      Posted at <%= project.created_at.strftime("%d %B %Y") %>
    </div>
  </div>
</div>
